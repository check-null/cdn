import{_ as V,r as C,n as m,o as B,X as P,Y as $,Z as D,g as N,c as _,b as h,d as s,e as n,A as o,w as f,m as S,i as M,L as A,$ as J,a0 as L,a1 as j,a2 as z,F,x as E,h as G}from"./index-CZ6tZO03.js";const K={class:"monitor-container"},O={class:"monitor-header"},X={class:"header-actions"},Y={class:"update-time"},Z={class:"overview-cards"},q={class:"stat-card"},Q={class:"stat-icon cpu"},R={class:"stat-content"},W={class:"stat-value"},ss={class:"stat-card"},ts={class:"stat-icon memory"},es={class:"stat-content"},as={class:"stat-value"},os={class:"stat-card"},ns={class:"stat-icon jvm"},ls={class:"stat-content"},is={class:"stat-value"},ds={class:"stat-card"},rs={class:"stat-icon uptime"},us={class:"stat-content"},cs={class:"stat-value"},vs={class:"monitor-content"},ps={class:"monitor-card"},ms={class:"info-grid"},_s={class:"info-item"},hs={class:"value"},fs={class:"info-item"},Ms={class:"value"},gs={class:"info-item"},bs={class:"value"},ys={class:"info-item"},xs={class:"value"},Cs={class:"progress-item"},Ns={class:"progress-label"},Us={class:"progress-item"},ws={class:"progress-label"},Hs={key:0},ks={key:1},Is={class:"memory-details"},Ts={class:"detail-item"},Vs={class:"detail-item"},Bs={class:"monitor-card"},Ps={class:"info-grid"},$s={class:"info-item"},Ds={class:"value"},Ss={class:"info-item"},As={class:"value"},Js={class:"info-item"},Ls={class:"value"},js={class:"info-item"},zs={class:"value"},Fs={class:"progress-item"},Es={class:"progress-item"},Gs={class:"progress-label"},Ks={class:"memory-details"},Os={class:"detail-item"},Xs={class:"detail-item"},Ys={class:"monitor-card"},Zs={class:"info-grid"},qs={class:"info-item"},Qs={class:"value highlight"},Rs={class:"info-item"},Ws={class:"value"},st={class:"info-item"},tt={class:"value"},et={class:"info-item"},at={class:"value"},ot={class:"monitor-card"},nt={class:"info-grid"},lt={class:"info-item"},it={class:"value highlight"},dt={class:"info-item"},rt={class:"value"},ut={class:"info-item"},ct={class:"value"},vt={class:"monitor-card full-width"},pt={class:"disk-list"},mt={class:"disk-header"},_t={class:"disk-name"},ht={class:"disk-usage"},ft={__name:"index",setup(Mt){const g=C(!1),e=C({}),U=C("-");let d=null;const b=m(()=>{if(!e.value.heapMax||e.value.heapMax<=0)return 0;const a=Math.round(e.value.heapUsed/e.value.heapMax*100);return Math.min(100,Math.max(0,a))}),w=m(()=>{const a=e.value.nonHeapMax||e.value.nonHeapUsed*2;if(!a||a<=0)return 0;const t=Math.round(e.value.nonHeapUsed/a*100);return Math.min(100,Math.max(0,t))}),y=m(()=>{if(!e.value.cpuUsage||e.value.cpuUsage<0)return 0;const a=Math.round(e.value.cpuUsage*100);return Math.min(100,Math.max(0,a))}),x=m(()=>{if(!e.value.totalMemory||e.value.totalMemory<=0)return 0;const a=(e.value.totalMemory||0)-(e.value.freeMemory||0),t=Math.round(a/e.value.totalMemory*100);return Math.min(100,Math.max(0,t))}),H=m(()=>!e.value.disks||!Array.isArray(e.value.disks)?[]:e.value.disks.map(a=>({name:a.name||a.path||"未知磁盘",total:a.total||0,used:a.used||0,percent:a.total>0?Math.round(a.used/a.total*100):0}))),l=a=>{if(!a)return"0 B";const t=["B","KB","MB","GB"];let i=0;for(;a>=1024&&i<t.length-1;)a/=1024,i++;return a.toFixed(1)+" "+t[i]},k=a=>{if(!a)return"-";const t=Math.floor(a/1e3),i=Math.floor(t/86400),u=Math.floor(t%86400/3600),r=Math.floor(t%3600/60);return i>0?`${i}天${u}时${r}分`:u>0?`${u}时${r}分`:`${r}分钟`},I=a=>a?new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",c=a=>a<60?"#67c23a":a<80?"#e6a23c":"#f56c6c",v=()=>{g.value=!0,G("/sys/monitor/info").then(a=>{const t=a.data||{};e.value={...t,heapUsed:Number(t.heapUsed)||0,heapMax:Number(t.heapMax)||0,heapInit:Number(t.heapInit)||0,heapCommitted:Number(t.heapCommitted)||0,nonHeapUsed:Number(t.nonHeapUsed)||0,nonHeapMax:Number(t.nonHeapMax)||0,startTime:Number(t.startTime)||0,uptime:Number(t.uptime)||0,totalMemory:Number(t.totalMemory)||0,freeMemory:Number(t.freeMemory)||0,disks:(t.disks||[]).map(i=>({...i,total:Number(i.total)||0,used:Number(i.used)||0,free:Number(i.free)||0}))},U.value=new Date().toLocaleTimeString("zh-CN"),g.value=!1}).catch(a=>{console.error("获取监控数据失败:",a),g.value=!1})};return B(()=>{v(),d=setInterval(v,1e4)}),P(()=>{d&&(clearInterval(d),d=null)}),$(()=>{v(),d&&clearInterval(d),d=setInterval(v,1e4)}),D(()=>{d&&(clearInterval(d),d=null)}),(a,t)=>{const i=N("el-button"),u=N("el-icon"),r=N("el-progress");return h(),_("div",K,[s("div",O,[t[1]||(t[1]=s("h3",null,"系统监控",-1)),s("div",X,[s("span",Y,"最后更新: "+o(U.value),1),n(i,{type:"primary",icon:M(A),loading:g.value,onClick:v},{default:f(()=>[...t[0]||(t[0]=[S("刷新",-1)])]),_:1},8,["icon","loading"])])]),s("div",Z,[s("div",q,[s("div",Q,[n(u,null,{default:f(()=>[n(M(J))]),_:1})]),s("div",R,[t[2]||(t[2]=s("div",{class:"stat-label"},"CPU使用率",-1)),s("div",W,o(y.value)+"%",1)])]),s("div",ss,[s("div",ts,[n(u,null,{default:f(()=>[n(M(L))]),_:1})]),s("div",es,[t[3]||(t[3]=s("div",{class:"stat-label"},"内存使用率",-1)),s("div",as,o(x.value)+"%",1)])]),s("div",os,[s("div",ns,[n(u,null,{default:f(()=>[n(M(j))]),_:1})]),s("div",ls,[t[4]||(t[4]=s("div",{class:"stat-label"},"JVM堆内存",-1)),s("div",is,o(b.value)+"%",1)])]),s("div",ds,[s("div",rs,[n(u,null,{default:f(()=>[n(M(z))]),_:1})]),s("div",us,[t[5]||(t[5]=s("div",{class:"stat-label"},"运行时长",-1)),s("div",cs,o(k(e.value.uptime)),1)])])]),s("div",vs,[s("div",ps,[t[14]||(t[14]=s("h4",null,"JVM信息",-1)),s("div",ms,[s("div",_s,[t[6]||(t[6]=s("span",{class:"label"},"JVM名称",-1)),s("span",hs,o(e.value.jvmName),1)]),s("div",fs,[t[7]||(t[7]=s("span",{class:"label"},"Java版本",-1)),s("span",Ms,o(e.value.javaVersion),1)]),s("div",gs,[t[8]||(t[8]=s("span",{class:"label"},"JVM供应商",-1)),s("span",bs,o(e.value.jvmVendor||"Oracle Corporation"),1)]),s("div",ys,[t[9]||(t[9]=s("span",{class:"label"},"启动时间",-1)),s("span",xs,o(I(e.value.startTime)),1)])]),s("div",Cs,[s("div",Ns,[t[10]||(t[10]=s("span",null,"堆内存",-1)),s("span",null,o(l(e.value.heapUsed))+" / "+o(l(e.value.heapMax)),1)]),n(r,{percentage:b.value,color:c(b.value),"stroke-width":12},null,8,["percentage","color"])]),s("div",Us,[s("div",ws,[t[11]||(t[11]=s("span",null,"非堆内存",-1)),e.value.nonHeapMax>0?(h(),_("span",Hs,o(l(e.value.nonHeapUsed))+" / "+o(l(e.value.nonHeapMax)),1)):(h(),_("span",ks,o(l(e.value.nonHeapUsed))+" / 无限制",1))]),n(r,{percentage:w.value,color:c(w.value),"stroke-width":12},null,8,["percentage","color"])]),s("div",Is,[s("div",Ts,[t[12]||(t[12]=s("span",null,"堆内存初始",-1)),s("span",null,o(l(e.value.heapInit)),1)]),s("div",Vs,[t[13]||(t[13]=s("span",null,"堆内存已提交",-1)),s("span",null,o(l(e.value.heapCommitted)),1)])])]),s("div",Bs,[t[23]||(t[23]=s("h4",null,"系统信息",-1)),s("div",Ps,[s("div",$s,[t[15]||(t[15]=s("span",{class:"label"},"操作系统",-1)),s("span",Ds,o(e.value.osName),1)]),s("div",Ss,[t[16]||(t[16]=s("span",{class:"label"},"系统架构",-1)),s("span",As,o(e.value.osArch),1)]),s("div",Js,[t[17]||(t[17]=s("span",{class:"label"},"系统版本",-1)),s("span",Ls,o(e.value.osVersion||"-"),1)]),s("div",js,[t[18]||(t[18]=s("span",{class:"label"},"CPU核心数",-1)),s("span",zs,o(e.value.cpuCores)+" 核",1)])]),s("div",Fs,[t[19]||(t[19]=s("div",{class:"progress-label"},[s("span",null,"CPU使用率")],-1)),n(r,{percentage:y.value,color:c(y.value),"stroke-width":12},null,8,["percentage","color"])]),s("div",Es,[s("div",Gs,[t[20]||(t[20]=s("span",null,"系统内存",-1)),s("span",null,o(l(e.value.totalMemory-e.value.freeMemory))+" / "+o(l(e.value.totalMemory)),1)]),n(r,{percentage:x.value,color:c(x.value),"stroke-width":12},null,8,["percentage","color"])]),s("div",Ks,[s("div",Os,[t[21]||(t[21]=s("span",null,"可用内存",-1)),s("span",null,o(l(e.value.freeMemory)),1)]),s("div",Xs,[t[22]||(t[22]=s("span",null,"已用内存",-1)),s("span",null,o(l(e.value.totalMemory-e.value.freeMemory)),1)])])]),s("div",Ys,[t[28]||(t[28]=s("h4",null,"线程信息",-1)),s("div",Zs,[s("div",qs,[t[24]||(t[24]=s("span",{class:"label"},"当前线程数",-1)),s("span",Qs,o(e.value.threadCount||0),1)]),s("div",Rs,[t[25]||(t[25]=s("span",{class:"label"},"峰值线程数",-1)),s("span",Ws,o(e.value.peakThreadCount||0),1)]),s("div",st,[t[26]||(t[26]=s("span",{class:"label"},"守护线程数",-1)),s("span",tt,o(e.value.daemonThreadCount||0),1)]),s("div",et,[t[27]||(t[27]=s("span",{class:"label"},"总启动线程数",-1)),s("span",at,o(e.value.totalStartedThreadCount||0),1)])])]),s("div",ot,[t[32]||(t[32]=s("h4",null,"类加载信息",-1)),s("div",nt,[s("div",lt,[t[29]||(t[29]=s("span",{class:"label"},"已加载类数量",-1)),s("span",it,o(e.value.loadedClassCount||0),1)]),s("div",dt,[t[30]||(t[30]=s("span",{class:"label"},"总加载类数量",-1)),s("span",rt,o(e.value.totalLoadedClassCount||0),1)]),s("div",ut,[t[31]||(t[31]=s("span",{class:"label"},"已卸载类数量",-1)),s("span",ct,o(e.value.unloadedClassCount||0),1)])])]),s("div",vt,[t[33]||(t[33]=s("h4",null,"磁盘信息",-1)),s("div",pt,[(h(!0),_(F,null,E(H.value,(p,T)=>(h(),_("div",{key:T,class:"disk-item"},[s("div",mt,[s("span",_t,o(p.name),1),s("span",ht,o(l(p.used))+" / "+o(l(p.total)),1)]),n(r,{percentage:p.percent,color:c(p.percent),"stroke-width":10},null,8,["percentage","color"])]))),128))])])])])}}},bt=V(ft,[["__scopeId","data-v-8f893df5"]]);export{bt as default};
