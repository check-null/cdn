import{_ as O,r as N,n as v,q as U,s as J,c as r,b as l,t as S,e as t,w as e,g as s,u as Z,v as $,d,m as p,F as h,x as b,y as c,z as I,A as f,i as w,B as K,C as W,D as Y,K as X,G as ee,p as te,H as ne}from"./index-TA7qbyPo.js";import{g as oe}from"./icons-Dv9EfjIj.js";const le="https://fastly.jsdelivr.net/gh/check-null/cdn@main/lq/logo-full.svg",se="https://fastly.jsdelivr.net/gh/check-null/cdn@main/lq/logo-icon.svg",ae={class:"page-wrapper"},ie={class:"logo"},ce={key:0,src:le,alt:"LightQuiz",class:"logo-full"},re={key:1,src:se,alt:"LQ",class:"logo-icon"},ue={class:"header-left"},de={key:0,class:"page-title"},_e={class:"header-right"},me={class:"user-info"},pe={class:"account"},fe="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjOTA5Mzk5IiBkPSJNMTIgNGE0IDQgMCAwIDEgNCA0YTQgNCAwIDAgMS00IDRhNCA0IDAgMCAxLTQtNGE0IDQgMCAwIDEgNC00bTAgMTBjNC40MiAwIDggMS43OSA4IDR2Mkg0di0yYzAtMi4yMSAzLjU4LTQgOC00Ii8+PC9zdmc+",ge={__name:"index",setup(ve){const y=J(),z=Z(),u=N(!1),_=N(!1),B=v(()=>U),x=(a,n)=>{if(a&&a.trim())return oe(a);if(n){const m=n.url||"",i=n.name||"";if(m.includes("question")||i.includes("题目"))return"Document";if(m.includes("category")||i.includes("分类"))return"Folder";if(m.includes("system")||i.includes("系统"))return"Setting"}return"Document"},T=a=>({用户管理:"User",角色管理:"UserFilled",菜单管理:"Menu",系统监控:"Monitor",登录日志:"Clock"})[a]||"Document",C=v(()=>{const a=localStorage.getItem("userInfo");return a?JSON.parse(a):{}}),k=v(()=>y.meta.title||y.name||""),L=v(()=>y.path),j=async a=>{if(a==="profile")z.push("/profile");else if(a==="logout"){try{await ee.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await te("/sys/auth/logout")}catch(n){if(n==="cancel")return}localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("permissions"),ne(),window.location.href="/login"}};return(a,n)=>{const m=s("HomeFilled"),i=s("el-icon"),M=s("el-menu-item"),F=s("el-sub-menu"),H=s("el-menu"),Q=s("el-aside"),R=s("el-avatar"),A=s("el-dropdown-item"),E=s("el-dropdown-menu"),P=s("el-dropdown"),V=s("el-header"),G=s("router-view"),q=s("el-main"),D=s("el-container");return l(),r("div",ae,[_.value?(l(),r("div",{key:0,class:"mobile-overlay",onClick:n[0]||(n[0]=o=>_.value=!1)})):S("",!0),t(D,{class:"layout-container"},{default:e(()=>[t(Q,{width:u.value?"64px":"200px",class:$(["aside",{"mobile-visible":_.value}])},{default:e(()=>[d("div",ie,[u.value?(l(),r("img",re)):(l(),r("img",ce))]),t(H,{"default-active":L.value,collapse:u.value,"collapse-transition":!1,router:"",class:"menu"},{default:e(()=>[t(M,{index:"/home"},{title:e(()=>[...n[3]||(n[3]=[p("首页",-1)])]),default:e(()=>[t(i,null,{default:e(()=>[t(m)]),_:1})]),_:1}),(l(!0),r(h,null,b(B.value,o=>(l(),r(h,{key:o.id},[o.children&&o.children.length?(l(),c(F,{key:0,index:"/"+(o.url||o.id)},{title:e(()=>[t(i,null,{default:e(()=>[(l(),c(I(x(o.icon,o))))]),_:2},1024),d("span",null,f(o.name),1)]),default:e(()=>[(l(!0),r(h,null,b(o.children,g=>(l(),c(M,{key:g.id,index:"/"+g.url},{title:e(()=>[p(f(g.name),1)]),default:e(()=>[t(i,null,{default:e(()=>[(l(),c(I(T(g.name))))]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(l(),c(M,{key:1,index:"/"+o.url},{title:e(()=>[p(f(o.name),1)]),default:e(()=>[t(i,null,{default:e(()=>[(l(),c(I(x(o.icon,o))))]),_:2},1024)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active","collapse"])]),_:1},8,["width","class"]),t(D,null,{default:e(()=>[t(V,{class:"header"},{default:e(()=>[d("div",ue,[t(i,{class:"collapse-btn",onClick:n[1]||(n[1]=o=>u.value=!u.value)},{default:e(()=>[u.value?(l(),c(w(K),{key:0})):(l(),c(w(W),{key:1}))]),_:1}),t(i,{class:"mobile-menu-btn",onClick:n[2]||(n[2]=o=>_.value=!_.value)},{default:e(()=>[t(w(Y))]),_:1}),k.value?(l(),r("span",de,f(k.value),1)):S("",!0)]),d("div",_e,[t(P,{onCommand:j},{dropdown:e(()=>[t(E,null,{default:e(()=>[t(A,{command:"profile"},{default:e(()=>[...n[4]||(n[4]=[p("个人中心",-1)])]),_:1}),t(A,{command:"logout"},{default:e(()=>[...n[5]||(n[5]=[p("退出登录",-1)])]),_:1})]),_:1})]),default:e(()=>[d("span",me,[t(R,{size:32,src:C.value.headUrl||fe},null,8,["src"]),d("span",pe,f(C.value.nickName||C.value.account),1)])]),_:1})])]),_:1}),t(q,{class:"main"},{default:e(()=>[t(G,null,{default:e(({Component:o})=>[(l(),c(X,null,[(l(),c(I(o)))],1024))]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ce=O(ge,[["__scopeId","data-v-864e4963"]]);export{Ce as default};
