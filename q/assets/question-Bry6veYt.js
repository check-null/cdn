import{q as I,i as C,m as P,a as U,r as d,f as h,g as H,o as n,c as r,I as i,e as R,A as l,B as a,C as s,E as L,h as B,D as N,X as y}from"./vlib-Cn1ZCOTB.js";import{u as W}from"./useView-C72V-sL6.js";import{_ as O,b as T}from"./index-9CjrkANP.js";import{_ as K}from"./question-add-or-update-DKwuuY4A.js";import{u as j}from"./windowSizeMonitor-B3pedXK7.js";import{p as E}from"./index-Dy9BRIFk.js";import"./quill-BosuxZz1.js";import"./lodash-CIOfnQPl.js";import"./index-rTl7iYie.js";const A={class:"mod-demo__question"},X={id:"hide"},G={__name:"question",setup(J){const{width:g}=j(),v={children:"children",label:"categoryName",value:"id"},_=I(()=>{let u=g.value<768;return{xs:u,titleWidth:u?"200":"",categoryWidth:u?"100":""}}),b=C({deleteIsBatch:!0,getDataListURL:"/demo/question/page",getDataListIsPage:!0,deleteURL:"/demo/question"}),t=C({...W(b),...P(b)}),k=C([]),w=U(),c=u=>{w.value.init(u)};return(()=>{T.get("/demo/category/tree").then(u=>{Object.assign(k,u.data)})})(),(u,e)=>{const V=d("el-input"),p=d("el-form-item"),q=d("el-tree-select"),m=d("el-button"),D=d("el-form"),f=d("el-table-column"),x=d("el-tooltip"),z=d("el-table"),S=d("el-pagination"),F=h("loading");return n(),H("div",A,[_.value.xs?i("",!0):(n(),r(D,{key:0,inline:!0,model:t.dataForm,onKeyup:e[5]||(e[5]=L(o=>t.getDataList(),["enter"]))},{default:a(()=>[l(p,{label:"标题",prop:"title"},{default:a(()=>[l(V,{modelValue:t.dataForm.title,"onUpdate:modelValue":e[0]||(e[0]=o=>t.dataForm.title=o),placeholder:"标题",clearable:""},null,8,["modelValue"])]),_:1}),l(p,{label:"分类",prop:"categoryId"},{default:a(()=>[l(q,{modelValue:t.dataForm.categoryId,"onUpdate:modelValue":e[1]||(e[1]=o=>t.dataForm.categoryId=o),data:k,"check-strictly":"","render-after-expand":!0,props:v,clearable:"","node-key":"id"},null,8,["modelValue","data"])]),_:1}),l(p,null,{default:a(()=>[t.hasPermission("demo:question:page")?(n(),r(m,{key:0,type:"primary",onClick:e[2]||(e[2]=o=>t.query())},{default:a(()=>e[12]||(e[12]=[s("查询")])),_:1})):i("",!0)]),_:1}),l(p,null,{default:a(()=>[t.hasPermission("demo:question:save")?(n(),r(m,{key:0,onClick:e[3]||(e[3]=o=>c())},{default:a(()=>e[13]||(e[13]=[s("新增")])),_:1})):i("",!0)]),_:1}),l(p,null,{default:a(()=>[t.hasPermission("demo:question:delete")?(n(),r(m,{key:0,type:"danger",onClick:e[4]||(e[4]=o=>t.deleteHandle())},{default:a(()=>e[14]||(e[14]=[s("删除")])),_:1})):i("",!0)]),_:1})]),_:1},8,["model"])),_.value.xs?(n(),r(D,{key:1,class:"dataForm",inline:!0,model:t.dataForm,onKeyup:e[11]||(e[11]=L(o=>t.getDataList(),["enter"]))},{default:a(()=>[l(p,{label:"标题",prop:"title"},{default:a(()=>[l(V,{modelValue:t.dataForm.title,"onUpdate:modelValue":e[6]||(e[6]=o=>t.dataForm.title=o),placeholder:"标题",clearable:""},null,8,["modelValue"])]),_:1}),l(p,{label:"分类",prop:"categoryId"},{default:a(()=>[l(q,{modelValue:t.dataForm.categoryId,"onUpdate:modelValue":e[7]||(e[7]=o=>t.dataForm.categoryId=o),data:k,"check-strictly":"","render-after-expand":!0,props:v,clearable:""},null,8,["modelValue","data"])]),_:1}),l(p,null,{default:a(()=>[t.hasPermission("demo:question:page")?(n(),r(m,{key:0,type:"primary",onClick:e[8]||(e[8]=o=>t.query())},{default:a(()=>e[15]||(e[15]=[s("查询")])),_:1})):i("",!0),t.hasPermission("demo:question:save")?(n(),r(m,{key:1,onClick:e[9]||(e[9]=o=>c())},{default:a(()=>e[16]||(e[16]=[s("新增")])),_:1})):i("",!0),t.hasPermission("demo:question:delete")?(n(),r(m,{key:2,type:"danger",onClick:e[10]||(e[10]=o=>t.deleteHandle())},{default:a(()=>e[17]||(e[17]=[s("删除")])),_:1})):i("",!0)]),_:1})]),_:1},8,["model"])):i("",!0),R((n(),r(z,{data:t.dataList,border:"",onSelectionChange:t.dataListSelectionChangeHandle,style:{width:"100%"}},{default:a(()=>[l(f,{type:"selection",width:"50"}),l(f,{prop:"title",label:"标题",width:_.value.titleWidth},{default:a(o=>[l(x,{class:"box-item",effect:"dark",content:o.row.title,placement:"top-start"},{default:a(()=>[B("span",X,N(o.row.title),1)]),_:2},1032,["content"])]),_:1},8,["width"]),l(f,{prop:"categoryName",label:"分类",width:_.value.categoryWidth},null,8,["width"]),y(g)>=768?(n(),r(f,{key:0,prop:"createDate",label:"创建时间"})):i("",!0),y(g)>=768?(n(),r(f,{key:1,prop:"updateDate",label:"修改时间"})):i("",!0),l(f,{label:"操作",width:"120"},{default:a(o=>[t.hasPermission("demo:question:update")?(n(),r(m,{key:0,type:"primary",link:"",onClick:$=>c(o.row.id)},{default:a(()=>e[18]||(e[18]=[s("修改")])),_:2},1032,["onClick"])):i("",!0),t.hasPermission("demo:question:delete")?(n(),r(m,{key:1,type:"primary",link:"",onClick:$=>t.deleteHandle(o.row.id)},{default:a(()=>e[19]||(e[19]=[s("删除")])),_:2},1032,["onClick"])):i("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[F,t.dataListLoading]]),y(g)>=768?(n(),r(S,{key:2,"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,total:t.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.pageSizeChangeHandle,onCurrentChange:t.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])):i("",!0),y(g)<768?(n(),r(E,{key:3,"current-page":t.page,total:t.total,"page-size":t.limit,onCurrentChange:t.pageCurrentChangeHandle},null,8,["current-page","total","page-size","onCurrentChange"])):i("",!0),l(K,{ref_key:"addOrUpdateRef",ref:w,onRefreshDataList:t.getDataList,selectTree:k,screenSize:y(g)},{default:a(()=>e[20]||(e[20]=[s("确定")])),_:1},8,["onRefreshDataList","selectTree","screenSize"])])}}},re=O(G,[["__scopeId","data-v-fa2afc71"]]);export{re as default};
