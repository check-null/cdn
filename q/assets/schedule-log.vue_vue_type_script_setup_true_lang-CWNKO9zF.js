import{d as V,a as k,i as _,m as I,r as o,f as x,c as s,o as i,B as n,A as a,e as S,E as j,C as p,P as B}from"./vlib-Cn1ZCOTB.js";import{u as F}from"./useView-C72V-sL6.js";import{b as $}from"./index-9CjrkANP.js";const P=V({__name:"schedule-log",setup(E,{expose:f}){const d=k(!1),g=_({getDataListURL:"/sys/scheduleLog/page",getDataListIsPage:!0,dataForm:{jobId:""}}),t=_({...F(g),...I(g)}),b=()=>{d.value=!0,t.getDataList()},C=u=>{$.get(`/sys/scheduleLog/${u}`).then(e=>{B.alert(e.data.error)})};return f({init:b}),(u,e)=>{const h=o("el-input"),m=o("el-form-item"),v=o("el-button"),w=o("el-form"),r=o("el-table-column"),c=o("el-tag"),L=o("el-table"),y=o("el-pagination"),D=o("el-dialog"),z=x("loading");return i(),s(D,{modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=l=>d.value=l),title:"日志列表","close-on-click-modal":!1,"close-on-press-escape":!1,width:"75%"},{default:n(()=>[a(w,{inline:!0,model:t.dataForm,onKeyup:e[2]||(e[2]=j(l=>t.getDataList(),["enter"]))},{default:n(()=>[a(m,null,{default:n(()=>[a(h,{modelValue:t.dataForm.jobId,"onUpdate:modelValue":e[0]||(e[0]=l=>t.dataForm.jobId=l),placeholder:"任务ID",clearable:""},null,8,["modelValue"])]),_:1}),a(m,null,{default:n(()=>[a(v,{onClick:e[1]||(e[1]=l=>t.getDataList())},{default:n(()=>e[4]||(e[4]=[p("查询")])),_:1})]),_:1})]),_:1},8,["model"]),S((i(),s(L,{data:t.dataList,border:"",onSortChange:t.dataListSortChangeHandle,height:"460",style:{width:"100%"}},{default:n(()=>[a(r,{prop:"jobId",label:"任务ID","header-align":"center",align:"center",width:"180"}),a(r,{prop:"beanName",label:"bean名称","header-align":"center",align:"center"}),a(r,{prop:"params",label:"参数","header-align":"center",align:"center"}),a(r,{prop:"status",label:"状态","header-align":"center",align:"center"},{default:n(l=>[l.row.status===1?(i(),s(c,{key:0,size:"small"},{default:n(()=>e[5]||(e[5]=[p("成功")])),_:1})):(i(),s(c,{key:1,type:"danger",size:"small",onClick:H=>C(l.row.id),style:{cursor:"pointer"}},{default:n(()=>e[6]||(e[6]=[p("失败")])),_:2},1032,["onClick"]))]),_:1}),a(r,{prop:"times",label:"耗时(单位: 毫秒)","header-align":"center",align:"center"}),a(r,{prop:"createDate",label:"执行时间","header-align":"center",align:"center",width:"180"})]),_:1},8,["data","onSortChange"])),[[z,t.dataListLoading]]),a(y,{"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,total:t.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.pageSizeChangeHandle,onCurrentChange:t.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1},8,["modelValue"])}}});export{P as _};
