import{d as E,a as p,i as N,r as u,c as F,o as U,B as t,A as a,E as $,C as v,F as w}from"./vlib-Cn1ZCOTB.js";import{b as i}from"./index-VyNxZgU2.js";const K=E({__name:"schedule-add-or-update",emits:["refreshDataList"],setup(B,{expose:V,emit:c}){const g=c,r=p(!1),d=p(),l=N({id:"",beanName:"",params:"",cronExpression:"",remark:"",status:0}),_=p({beanName:[{required:!0,message:"必填项不能为空",trigger:"blur"}],cronExpression:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}),k=s=>{r.value=!0,l.id="",d.value&&d.value.resetFields(),s&&x(s)},x=s=>{i.get(`/sys/schedule/${s}`).then(e=>{Object.assign(l,e.data)})},f=()=>{d.value.validate(s=>{if(!s)return!1;(l.id?i.put("/sys/schedule",l):i.post("/sys/schedule",l)).then(n=>{w.success({message:"成功",duration:500,onClose:()=>{r.value=!1,g("refreshDataList")}})})})};return V({init:k}),(s,e)=>{const n=u("el-input"),m=u("el-form-item"),y=u("el-form"),b=u("el-button"),C=u("el-dialog");return U(),F(C,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=o=>r.value=o),title:l.id?"修改":"新增","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:t(()=>[a(b,{onClick:e[5]||(e[5]=o=>r.value=!1)},{default:t(()=>e[8]||(e[8]=[v("取消")])),_:1}),a(b,{type:"primary",onClick:e[6]||(e[6]=o=>f())},{default:t(()=>e[9]||(e[9]=[v("确定")])),_:1})]),default:t(()=>[a(y,{model:l,rules:_.value,ref_key:"dataFormRef",ref:d,onKeyup:e[4]||(e[4]=$(o=>f(),["enter"])),"label-width":"120px"},{default:t(()=>[a(m,{prop:"beanName",label:"bean名称"},{default:t(()=>[a(n,{modelValue:l.beanName,"onUpdate:modelValue":e[0]||(e[0]=o=>l.beanName=o),placeholder:"spring bean名称, 如: testTask"},null,8,["modelValue"])]),_:1}),a(m,{prop:"params",label:"参数"},{default:t(()=>[a(n,{modelValue:l.params,"onUpdate:modelValue":e[1]||(e[1]=o=>l.params=o),placeholder:"参数"},null,8,["modelValue"])]),_:1}),a(m,{prop:"cronExpression",label:"cron表达式"},{default:t(()=>[a(n,{modelValue:l.cronExpression,"onUpdate:modelValue":e[2]||(e[2]=o=>l.cronExpression=o),placeholder:"如: 0 0 12 * * ?"},null,8,["modelValue"])]),_:1}),a(m,{prop:"remark",label:"备注"},{default:t(()=>[a(n,{modelValue:l.remark,"onUpdate:modelValue":e[3]||(e[3]=o=>l.remark=o),placeholder:"备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});export{K as _};
