import{d as x,i as w,m as D,a as R,r as d,f as $,g as y,o as a,A as o,e as B,B as t,c as r,I as f,C as s,E as T,h as U}from"./vlib-Cn1ZCOTB.js";import{u as V}from"./useView-C72V-sL6.js";import{_ as N}from"./menu-add-or-update.vue_vue_type_style_index_0_lang-f_KONFGs.js";import"./quill-BosuxZz1.js";import"./index-9CjrkANP.js";import"./lodash-CIOfnQPl.js";const P={class:"mod-sys__menu"},H={class:"iconfont","aria-hidden":"true"},O=["xlink:href"],E={key:0},z=x({__name:"menu",setup(K){const c=w({getDataListURL:"/sys/menu/list",deleteURL:"/sys/menu"}),l=w({...V(c),...D(c)}),_=R(),g=m=>{_.value.init(m)},v=m=>{_.value.init2(m)};return(m,e)=>{const p=d("el-button"),b=d("el-form-item"),h=d("el-form"),i=d("el-table-column"),u=d("el-tag"),C=d("el-table"),L=$("loading");return a(),y("div",P,[o(h,{inline:!0,model:l.dataForm,onKeyup:e[1]||(e[1]=T(n=>l.getDataList(),["enter"]))},{default:t(()=>[o(b,null,{default:t(()=>[l.hasPermission("sys:menu:save")?(a(),r(p,{key:0,type:"primary",onClick:e[0]||(e[0]=n=>g())},{default:t(()=>e[2]||(e[2]=[s("新增")])),_:1})):f("",!0)]),_:1})]),_:1},8,["model"]),B((a(),r(C,{data:l.dataList,"show-overflow-tooltip":"","row-key":"id",border:"",style:{width:"100%"}},{default:t(()=>[o(i,{prop:"name",label:"名称","header-align":"center","min-width":"150"}),o(i,{prop:"icon",label:"图标","header-align":"center",align:"center"},{default:t(n=>[(a(),y("svg",H,[U("use",{"xlink:href":`#${n.row.icon}`},null,8,O)]))]),_:1}),o(i,{prop:"menuType",label:"类型","header-align":"center",align:"center"},{default:t(n=>[n.row.menuType===0?(a(),r(u,{key:0},{default:t(()=>e[3]||(e[3]=[s("菜单")])),_:1})):(a(),r(u,{key:1,type:"info"},{default:t(()=>e[4]||(e[4]=[s("按钮")])),_:1}))]),_:1}),o(i,{prop:"openStyle",label:"打开方式","header-align":"center",align:"center"},{default:t(n=>[n.row.menuType!==0?(a(),y("span",E)):n.row.openStyle===1?(a(),r(u,{key:1},{default:t(()=>e[5]||(e[5]=[s("外部打开")])),_:1})):(a(),r(u,{key:2,type:"info"},{default:t(()=>e[6]||(e[6]=[s("内部打开")])),_:1}))]),_:1}),o(i,{prop:"sort",label:"排序","header-align":"center",align:"center"}),o(i,{prop:"url",label:"路由","header-align":"center",align:"center",width:"150"}),o(i,{prop:"permissions",label:"授权标识","header-align":"center",align:"center",width:"150"}),o(i,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"170"},{default:t(n=>[l.hasPermission("sys:menu:save")&&n.row.menuType===0?(a(),r(p,{key:0,type:"primary",link:"",onClick:k=>v(n.row)},{default:t(()=>e[7]||(e[7]=[s("新增")])),_:2},1032,["onClick"])):f("",!0),l.hasPermission("sys:menu:update")?(a(),r(p,{key:1,type:"primary",link:"",onClick:k=>g(n.row.id)},{default:t(()=>e[8]||(e[8]=[s("修改")])),_:2},1032,["onClick"])):f("",!0),l.hasPermission("sys:menu:delete")?(a(),r(p,{key:2,type:"primary",link:"",onClick:k=>l.deleteHandle(n.row.id)},{default:t(()=>e[9]||(e[9]=[s("删除")])),_:2},1032,["onClick"])):f("",!0)]),_:1})]),_:1},8,["data"])),[[L,l.dataListLoading]]),o(N,{ref_key:"addOrUpdateRef",ref:_,onRefreshDataList:l.getDataList},null,8,["onRefreshDataList"])])}}});export{z as default};
