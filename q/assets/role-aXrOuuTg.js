import{d as w,i as C,m as D,a as S,r as o,f as z,g as H,o as r,A as a,e as R,B as n,C as d,c as m,I as u,E as V}from"./vlib-Cn1ZCOTB.js";import{u as $}from"./useView-DRWh0fDC.js";import{_ as x}from"./role-add-or-update.vue_vue_type_script_setup_true_lang-DeisXVmt.js";import"./quill-BosuxZz1.js";import"./index-VyNxZgU2.js";import"./lodash-CIOfnQPl.js";const U={class:"mod-sys__role"},K=w({__name:"role",setup(B){const g=C({getDataListURL:"/sys/role/page",getDataListIsPage:!0,deleteURL:"/sys/role",deleteIsBatch:!0,dataForm:{name:""}}),e=C({...$(g),...D(g)}),f=S(),_=c=>{f.value.init(c)};return(c,t)=>{const y=o("el-input"),p=o("el-form-item"),i=o("el-button"),k=o("el-form"),s=o("el-table-column"),v=o("el-table"),h=o("el-pagination"),L=z("loading");return r(),H("div",U,[a(k,{inline:!0,model:e.dataForm,onKeyup:t[4]||(t[4]=V(l=>e.getDataList(),["enter"]))},{default:n(()=>[a(p,null,{default:n(()=>[a(y,{modelValue:e.dataForm.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.dataForm.name=l),placeholder:"名称",clearable:""},null,8,["modelValue"])]),_:1}),a(p,null,{default:n(()=>[a(i,{onClick:t[1]||(t[1]=l=>e.getDataList())},{default:n(()=>t[5]||(t[5]=[d("查询")])),_:1})]),_:1}),a(p,null,{default:n(()=>[e.hasPermission("sys:role:save")?(r(),m(i,{key:0,type:"primary",onClick:t[2]||(t[2]=l=>_())},{default:n(()=>t[6]||(t[6]=[d("新增")])),_:1})):u("",!0)]),_:1}),a(p,null,{default:n(()=>[e.hasPermission("sys:role:delete")?(r(),m(i,{key:0,type:"danger",onClick:t[3]||(t[3]=l=>e.deleteHandle())},{default:n(()=>t[7]||(t[7]=[d("删除")])),_:1})):u("",!0)]),_:1})]),_:1},8,["model"]),R((r(),m(v,{data:e.dataList,border:"",onSelectionChange:e.dataListSelectionChangeHandle,onSortChange:e.dataListSortChangeHandle,style:{width:"100%"}},{default:n(()=>[a(s,{type:"selection","header-align":"center",align:"center",width:"50"}),a(s,{prop:"name",label:"名称","header-align":"center",align:"center"}),a(s,{prop:"remark",label:"备注","header-align":"center",align:"center"}),a(s,{prop:"createDate",label:"创建时间",sortable:"custom","header-align":"center",align:"center",width:"180"}),a(s,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"150"},{default:n(l=>[e.hasPermission("sys:role:update")?(r(),m(i,{key:0,type:"primary",link:"",onClick:b=>_(l.row.id)},{default:n(()=>t[8]||(t[8]=[d("修改")])),_:2},1032,["onClick"])):u("",!0),e.hasPermission("sys:role:delete")?(r(),m(i,{key:1,type:"primary",link:"",onClick:b=>e.deleteHandle(l.row.id)},{default:n(()=>t[9]||(t[9]=[d("删除")])),_:2},1032,["onClick"])):u("",!0)]),_:1})]),_:1},8,["data","onSelectionChange","onSortChange"])),[[L,e.dataListLoading]]),a(h,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),a(x,{ref_key:"addOrUpdateRef",ref:f,onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"])])}}});export{K as default};
