import{a as D,i as f,m as x,r as m,f as B,g as R,o as t,A as p,e as S,B as n,c as a,I as o,C as u,D as U,E as T,X as i}from"./vlib-Cn1ZCOTB.js";import{u as V}from"./useView-C72V-sL6.js";import $ from"./category-add-or-update-MFDZh2Vx.js";import{b as z}from"./index-9CjrkANP.js";import{u as E}from"./windowSizeMonitor-B3pedXK7.js";import"./quill-BosuxZz1.js";import"./lodash-CIOfnQPl.js";const P={class:"mod-demo__category"},q={__name:"category",setup(j){const{width:r}=E(),_=D(0),k=f({deleteIsBatch:!0,deleteURL:"/demo/category"}),l=f({...V(k),...x(k)}),b=D(),g=d=>{b.value.init(d)},v=f([]),w=()=>{z.get("/demo/category/tree").then(d=>{Object.assign(l.dataList,d.data),d.data.forEach(e=>{_.value+=e.total}),d.data.unshift({id:0,categoryName:"无"}),Object.assign(v,d.data)})};return w(),(d,e)=>{const y=m("el-button"),C=m("el-form-item"),h=m("el-form"),s=m("el-table-column"),L=m("el-table"),N=B("loading");return t(),R("div",P,[p(h,{inline:!0,model:l.dataForm,onKeyup:e[1]||(e[1]=T(c=>l.getDataList(),["enter"]))},{default:n(()=>[p(C,null,{default:n(()=>[l.hasPermission("demo:category:save")?(t(),a(y,{key:0,type:"primary",onClick:e[0]||(e[0]=c=>g())},{default:n(()=>e[2]||(e[2]=[u("新增")])),_:1})):o("",!0)]),_:1}),p(C,null,{default:n(()=>[u(" 题目总数: "+U(_.value),1)]),_:1})]),_:1},8,["model"]),S((t(),a(L,{data:l.dataList,border:"",style:{width:"100%"},"default-expand-all":"","row-key":"id"},{default:n(()=>[i(r)>=768?(t(),a(s,{key:0,prop:"categoryName",label:"分类名"})):o("",!0),i(r)>=768?(t(),a(s,{key:1,prop:"total",label:"题目总数"})):o("",!0),i(r)>=768?(t(),a(s,{key:2,prop:"sort",label:"排序"})):o("",!0),i(r)>=768?(t(),a(s,{key:3,prop:"createDate",label:"创建日期"})):o("",!0),i(r)>=768?(t(),a(s,{key:4,prop:"updateDate",label:"修改日期"})):o("",!0),i(r)<768?(t(),a(s,{key:5,prop:"categoryName",label:"分类名",width:"200"})):o("",!0),i(r)<768?(t(),a(s,{key:6,prop:"total",label:"题目总数",width:"100"})):o("",!0),i(r)<768?(t(),a(s,{key:7,prop:"sort",label:"排序",width:"100"})):o("",!0),p(s,{label:"操作",width:"150"},{default:n(c=>[l.hasPermission("demo:category:update")?(t(),a(y,{key:0,type:"primary",link:"",onClick:O=>g(c.row.id)},{default:n(()=>e[3]||(e[3]=[u("修改")])),_:2},1032,["onClick"])):o("",!0),l.hasPermission("demo:category:delete")?(t(),a(y,{key:1,type:"primary",link:"",onClick:O=>l.deleteHandle(c.row.id)},{default:n(()=>e[4]||(e[4]=[u("删除")])),_:2},1032,["onClick"])):o("",!0)]),_:1})]),_:1},8,["data"])),[[N,l.dataListLoading]]),p($,{ref_key:"addOrUpdateRef",ref:b,onRefreshDataList:w,selectTree:v,screenSize:i(r)},{default:n(()=>e[5]||(e[5]=[u("确定")])),_:1},8,["selectTree","screenSize"])])}}};export{q as default};
