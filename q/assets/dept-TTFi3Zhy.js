import{d as C,i as y,m as L,a as h,r as o,f as D,g as R,o as r,A as a,e as U,B as n,c as l,I as m,C as p,E as x}from"./vlib-Cn1ZCOTB.js";import B from"./dept-add-or-update-D_eCkTFg.js";import{u as N}from"./useView-C72V-sL6.js";import"./quill-BosuxZz1.js";import"./index-9CjrkANP.js";import"./lodash-CIOfnQPl.js";const O={class:"mod-sys__dept"},F=C({__name:"dept",setup(V){const _=y({getDataListURL:"/sys/dept/list",deleteURL:"/sys/dept"}),t=y({...N(_),...L(_)}),c=h(),f=u=>{c.value.init(u)};return(u,e)=>{const d=o("el-button"),g=o("el-form-item"),k=o("el-form"),s=o("el-table-column"),v=o("el-table"),w=D("loading");return r(),R("div",O,[a(k,{inline:!0,model:t.dataForm,onKeyup:e[1]||(e[1]=x(i=>t.getDataList(),["enter"]))},{default:n(()=>[a(g,null,{default:n(()=>[t.hasPermission("sys:dept:save")?(r(),l(d,{key:0,type:"primary",onClick:e[0]||(e[0]=i=>f())},{default:n(()=>e[2]||(e[2]=[p("新增")])),_:1})):m("",!0)]),_:1})]),_:1},8,["model"]),U((r(),l(v,{data:t.dataList,"row-key":"id",border:"",style:{width:"100%"}},{default:n(()=>[a(s,{prop:"name",label:"名称","header-align":"center","min-width":"150"}),a(s,{prop:"parentName",label:"上级部门","header-align":"center",align:"center"}),a(s,{prop:"sort",label:"排序","header-align":"center",align:"center",width:"80"}),a(s,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"150"},{default:n(i=>[t.hasPermission("sys:dept:update")?(r(),l(d,{key:0,type:"primary",link:"",onClick:b=>f(i.row.id)},{default:n(()=>e[3]||(e[3]=[p("修改")])),_:2},1032,["onClick"])):m("",!0),t.hasPermission("sys:dept:delete")?(r(),l(d,{key:1,type:"primary",link:"",onClick:b=>t.deleteHandle(i.row.id)},{default:n(()=>e[4]||(e[4]=[p("删除")])),_:2},1032,["onClick"])):m("",!0)]),_:1})]),_:1},8,["data"])),[[w,t.dataListLoading]]),a(B,{ref_key:"addOrUpdateRef",ref:c,onRefreshDataList:t.getDataList},null,8,["onRefreshDataList"])])}}});export{F as default};
