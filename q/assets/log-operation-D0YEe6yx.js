import{d as C,i as _,m as y,r as n,f as L,g as z,o as i,A as e,e as D,B as o,C as s,E as x,c as d,D as k}from"./vlib-Cn1ZCOTB.js";import{u as S}from"./useView-DRWh0fDC.js";import"./quill-BosuxZz1.js";import"./index-VyNxZgU2.js";import"./lodash-CIOfnQPl.js";const V={class:"mod-sys__log-operation"},I=C({__name:"log-operation",setup(q){const g=_({getDataListURL:"/sys/log/operation/page",getDataListIsPage:!0,exportURL:"/sys/log/operation/export",dataForm:{status:""}}),a=_({...S(g),...y(g)});return(U,t)=>{const u=n("el-option"),f=n("el-select"),p=n("el-form-item"),m=n("el-button"),b=n("el-form"),l=n("el-table-column"),c=n("el-tag"),w=n("el-table"),h=n("el-pagination"),v=L("loading");return i(),z("div",V,[e(b,{inline:!0,model:a.dataForm,onKeyup:t[3]||(t[3]=x(r=>a.getDataList(),["enter"]))},{default:o(()=>[e(p,null,{default:o(()=>[e(f,{modelValue:a.dataForm.status,"onUpdate:modelValue":t[0]||(t[0]=r=>a.dataForm.status=r),placeholder:"状态",clearable:""},{default:o(()=>[e(u,{label:"失败",value:0}),e(u,{label:"成功",value:1})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:o(()=>[e(m,{onClick:t[1]||(t[1]=r=>a.getDataList())},{default:o(()=>t[4]||(t[4]=[s("查询")])),_:1})]),_:1}),e(p,null,{default:o(()=>[e(m,{type:"info",onClick:t[2]||(t[2]=r=>a.exportHandle())},{default:o(()=>t[5]||(t[5]=[s("导出")])),_:1})]),_:1})]),_:1},8,["model"]),D((i(),d(w,{data:a.dataList,border:"",onSortChange:a.dataListSortChangeHandle,style:{width:"100%"}},{default:o(()=>[e(l,{prop:"creatorName",label:"用户名","header-align":"center",align:"center"}),e(l,{prop:"operation",label:"用户操作","header-align":"center",align:"center"}),e(l,{prop:"requestUri",label:"请求URI","header-align":"center",align:"center","show-overflow-tooltip":""}),e(l,{prop:"requestMethod",label:"请求方式","header-align":"center",align:"center"}),e(l,{prop:"requestParams",label:"请求参数","header-align":"center",align:"center",width:"150","show-overflow-tooltip":""}),e(l,{prop:"requestTime",label:"请求时长",sortable:"custom","header-align":"center",align:"center"},{default:o(r=>[s(k(`${r.row.requestTime}ms`),1)]),_:1}),e(l,{prop:"status",label:"状态",sortable:"custom","header-align":"center",align:"center"},{default:o(r=>[r.row.status===0?(i(),d(c,{key:0,size:"small",type:"danger"},{default:o(()=>t[6]||(t[6]=[s("失败")])),_:1})):(i(),d(c,{key:1,size:"small",type:"success"},{default:o(()=>t[7]||(t[7]=[s("成功")])),_:1}))]),_:1}),e(l,{prop:"ip",label:"操作IP","header-align":"center",align:"center","show-overflow-tooltip":""}),e(l,{prop:"userAgent",label:"用户代理","header-align":"center",align:"center",width:"150","show-overflow-tooltip":""}),e(l,{prop:"createDate",label:"创建时间",sortable:"custom","header-align":"center",align:"center",width:"180"})]),_:1},8,["data","onSortChange"])),[[v,a.dataListLoading]]),e(h,{"current-page":a.page,"page-sizes":[10,20,50,100],"page-size":a.limit,total:a.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:a.pageSizeChangeHandle,onCurrentChange:a.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])}}});export{I as default};
