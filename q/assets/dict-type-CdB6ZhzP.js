import{d as S,u as z,a as D,i as T,m as I,r as o,f as R,g as U,o as d,A as a,e as H,c as p,I as c,B as l,C as s,E as N,D as x}from"./vlib-Cn1ZCOTB.js";import{u as F}from"./useView-DRWh0fDC.js";import{_ as B}from"./dict-type-add-or-update.vue_vue_type_script_setup_true_lang-DUiqVqyJ.js";import{_ as P}from"./dict-data.vue_vue_type_script_setup_true_lang-DgBTKUz-.js";import"./quill-BosuxZz1.js";import"./index-VyNxZgU2.js";import"./lodash-CIOfnQPl.js";import"./dict-data-add-or-update.vue_vue_type_script_setup_true_lang-DgMZRKuG.js";const O={class:"mod-sys__dict"},W=S({__name:"dict-type",setup(E){const b=z(),g=D(!1),y=T({getDataListURL:"/sys/dict/type/page",getDataListIsPage:!0,deleteURL:"/sys/dict/type",deleteIsBatch:!0,dataForm:{id:"0",dictName:"",dictType:""},focusDictTypeId:"",focusDictTypeTitle:""}),e=T({...F(y),...I(y)}),_=u=>{g.value=!0,e.focusDictTypeId=u.id,e.focusDictTypeTitle=`${b.meta.title} - ${u.dictType}`},C=D(),k=u=>{C.value.init(u)};return(u,t)=>{const v=o("el-input"),m=o("el-form-item"),i=o("el-button"),w=o("el-form"),r=o("el-table-column"),L=o("el-table"),V=o("el-pagination"),h=o("el-drawer"),$=R("loading");return d(),U("div",O,[a(w,{inline:!0,model:e.dataForm,onKeyup:t[5]||(t[5]=N(n=>e.getDataList(),["enter"]))},{default:l(()=>[a(m,null,{default:l(()=>[a(v,{modelValue:e.dataForm.dictName,"onUpdate:modelValue":t[0]||(t[0]=n=>e.dataForm.dictName=n),placeholder:"字典名称",clearable:""},null,8,["modelValue"])]),_:1}),a(m,null,{default:l(()=>[a(v,{modelValue:e.dataForm.dictType,"onUpdate:modelValue":t[1]||(t[1]=n=>e.dataForm.dictType=n),placeholder:"字典类型",clearable:""},null,8,["modelValue"])]),_:1}),a(m,null,{default:l(()=>[a(i,{onClick:t[2]||(t[2]=n=>e.getDataList())},{default:l(()=>t[7]||(t[7]=[s("查询")])),_:1})]),_:1}),a(m,null,{default:l(()=>[e.hasPermission("sys:dict:save")?(d(),p(i,{key:0,type:"primary",onClick:t[3]||(t[3]=n=>k())},{default:l(()=>t[8]||(t[8]=[s("新增")])),_:1})):c("",!0)]),_:1}),a(m,null,{default:l(()=>[e.hasPermission("sys:dict:delete")?(d(),p(i,{key:0,type:"danger",onClick:t[4]||(t[4]=n=>e.deleteHandle())},{default:l(()=>t[9]||(t[9]=[s("删除")])),_:1})):c("",!0)]),_:1})]),_:1},8,["model"]),H((d(),p(L,{data:e.dataList,border:"",onSelectionChange:e.dataListSelectionChangeHandle,onSortChange:e.dataListSortChangeHandle,style:{width:"100%"}},{default:l(()=>[a(r,{type:"selection","header-align":"center",align:"center",width:"50"}),a(r,{prop:"dictName",label:"字典名称","header-align":"center",align:"center"}),a(r,{prop:"dictType",label:"字典类型","header-align":"center",align:"center"},{default:l(n=>[a(i,{type:"primary",link:"",onClick:f=>_(n.row)},{default:l(()=>[s(x(n.row.dictType),1)]),_:2},1032,["onClick"])]),_:1}),a(r,{prop:"sort",label:"排序",sortable:"custom","header-align":"center",align:"center"}),a(r,{prop:"remark",label:"备注","header-align":"center",align:"center"}),a(r,{prop:"createDate",label:"创建时间",sortable:"custom","header-align":"center",align:"center",width:"180"}),a(r,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"180"},{default:l(n=>[a(i,{type:"primary",link:"",onClick:f=>_(n.row)},{default:l(()=>t[10]||(t[10]=[s("字典配置")])),_:2},1032,["onClick"]),e.hasPermission("sys:dict:update")?(d(),p(i,{key:0,type:"primary",link:"",onClick:f=>k(n.row.id)},{default:l(()=>t[11]||(t[11]=[s("修改")])),_:2},1032,["onClick"])):c("",!0),e.hasPermission("sys:dict:delete")?(d(),p(i,{key:1,type:"primary",link:"",onClick:f=>e.deleteHandle(n.row.id)},{default:l(()=>t[12]||(t[12]=[s("删除")])),_:2},1032,["onClick"])):c("",!0)]),_:1})]),_:1},8,["data","onSelectionChange","onSortChange"])),[[$,e.dataListLoading]]),a(V,{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:e.pageSizeChangeHandle,onCurrentChange:e.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),a(B,{ref_key:"addOrUpdateRef",ref:C,onRefreshDataList:e.getDataList},null,8,["onRefreshDataList"]),g.value?(d(),p(h,{key:0,modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=n=>g.value=n),title:e.focusDictTypeTitle,size:800,"close-on-press-escape":!1,class:"rr-drawer"},{default:l(()=>[a(P,{dictTypeId:e.focusDictTypeId},null,8,["dictTypeId"])]),_:1},8,["modelValue","title"])):c("",!0)])}}});export{W as default};
