import{d as b,a as m,i as P,q as V,c as v,B as a,E as y,r as l,A as s,h as C,D as x,C as F,F as q,z as B,o as S}from"./vlib-Cn1ZCOTB.js";import{u as k,b as E}from"./index-VyNxZgU2.js";import"./quill-BosuxZz1.js";import"./lodash-CIOfnQPl.js";const z=b({__name:"user-update-password",setup(N){const i=B(),u=m(),r=P({password:"",newPassword:"",confirmPassword:""}),w=k(),f=V(()=>w.state.user),c=m({password:[{required:!0,message:"必填项不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"必填项不能为空",trigger:"blur"}],confirmPassword:[{required:!0,message:"必填项不能为空",trigger:"blur"},{validator:(n,e,o)=>{if(r.newPassword!==e)return o(new Error("确认密码与新密码输入不一致"));o()},trigger:"blur"}]}),p=()=>{u.value.validate(n=>{if(!n)return!1;E.put("/sys/user/password",r).then(e=>{q.success({message:"成功",duration:500,onClose:()=>{i.replace("/login")}})})})};return(n,e)=>{const o=l("el-form-item"),d=l("el-input"),_=l("el-button"),g=l("el-form");return S(),v(g,{model:r,rules:c.value,ref_key:"dataFormRef",ref:u,onKeyup:e[3]||(e[3]=y(t=>p(),["enter"])),"label-width":"120px"},{default:a(()=>[s(o,{label:"账号"},{default:a(()=>[C("span",null,x(f.value.username),1)]),_:1}),s(o,{prop:"password",label:"原密码"},{default:a(()=>[s(d,{modelValue:r.password,"onUpdate:modelValue":e[0]||(e[0]=t=>r.password=t),type:"password",placeholder:"原密码"},null,8,["modelValue"])]),_:1}),s(o,{prop:"newPassword",label:"新密码"},{default:a(()=>[s(d,{modelValue:r.newPassword,"onUpdate:modelValue":e[1]||(e[1]=t=>r.newPassword=t),type:"password",placeholder:"新密码"},null,8,["modelValue"])]),_:1}),s(o,{prop:"confirmPassword",label:"确认密码"},{default:a(()=>[s(d,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=t=>r.confirmPassword=t),type:"password",placeholder:"确认密码"},null,8,["modelValue"])]),_:1}),s(o,null,{default:a(()=>[s(_,{type:"primary",onClick:p},{default:a(()=>e[4]||(e[4]=[F("确定")])),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{z as default};
