import{d as x,i as C,m as S,a as U,r,f as z,g as F,o as s,A as a,e as H,B as n,C as d,c as i,I as m,E as R,D as I}from"./vlib-Cn1ZCOTB.js";import{u as $}from"./useView-C72V-sL6.js";import P from"./user-add-or-update-DbMKI6HG.js";import"./quill-BosuxZz1.js";import"./index-9CjrkANP.js";import"./lodash-CIOfnQPl.js";const B={class:"mod-sys__user"},T=x({__name:"user",setup(N){const g=C({getDataListURL:"/sys/user/page",getDataListIsPage:!0,deleteURL:"/sys/user",deleteIsBatch:!0,exportURL:"/sys/user/export",dataForm:{username:"",deptId:"",postId:"",gender:""}}),t=C({...$(g),...S(g)}),f=U(),_=y=>{f.value.init(y)};return(y,e)=>{const b=r("el-input"),u=r("el-form-item"),k=r("ren-select"),v=r("ren-dept-tree"),p=r("el-button"),L=r("el-form"),o=r("el-table-column"),c=r("el-tag"),w=r("el-table"),D=r("el-pagination"),V=z("loading");return s(),F("div",B,[a(L,{inline:!0,model:t.dataForm,onKeyup:e[7]||(e[7]=R(l=>t.getDataList(),["enter"]))},{default:n(()=>[a(u,null,{default:n(()=>[a(b,{modelValue:t.dataForm.username,"onUpdate:modelValue":e[0]||(e[0]=l=>t.dataForm.username=l),placeholder:"用户名",clearable:""},null,8,["modelValue"])]),_:1}),a(u,null,{default:n(()=>[a(k,{modelValue:t.dataForm.gender,"onUpdate:modelValue":e[1]||(e[1]=l=>t.dataForm.gender=l),"dict-type":"gender",placeholder:"性别"},null,8,["modelValue"])]),_:1}),a(u,null,{default:n(()=>[a(v,{modelValue:t.dataForm.deptId,"onUpdate:modelValue":e[2]||(e[2]=l=>t.dataForm.deptId=l),placeholder:"选择部门",query:!0},null,8,["modelValue"])]),_:1}),a(u,null,{default:n(()=>[a(p,{onClick:e[3]||(e[3]=l=>t.getDataList())},{default:n(()=>e[8]||(e[8]=[d("查询")])),_:1})]),_:1}),a(u,null,{default:n(()=>[t.hasPermission("sys:user:save")?(s(),i(p,{key:0,type:"primary",onClick:e[4]||(e[4]=l=>_())},{default:n(()=>e[9]||(e[9]=[d("新增")])),_:1})):m("",!0)]),_:1}),a(u,null,{default:n(()=>[t.hasPermission("sys:user:delete")?(s(),i(p,{key:0,type:"danger",onClick:e[5]||(e[5]=l=>t.deleteHandle())},{default:n(()=>e[10]||(e[10]=[d("删除")])),_:1})):m("",!0)]),_:1}),a(u,null,{default:n(()=>[t.hasPermission("sys:user:export")?(s(),i(p,{key:0,type:"info",onClick:e[6]||(e[6]=l=>t.exportHandle())},{default:n(()=>e[11]||(e[11]=[d("导出")])),_:1})):m("",!0)]),_:1})]),_:1},8,["model"]),H((s(),i(w,{data:t.dataList,border:"",onSelectionChange:t.dataListSelectionChangeHandle,onSortChange:t.dataListSortChangeHandle,style:{width:"100%"}},{default:n(()=>[a(o,{type:"selection","header-align":"center",align:"center",width:"50"}),a(o,{prop:"username",label:"用户名",sortable:"custom","header-align":"center",align:"center"}),a(o,{prop:"deptName",label:"所属部门","header-align":"center",align:"center"}),a(o,{prop:"email",label:"邮箱","header-align":"center",align:"center"}),a(o,{prop:"mobile",label:"手机号",sortable:"custom","header-align":"center",align:"center"}),a(o,{prop:"gender",label:"性别",sortable:"custom","header-align":"center",align:"center"},{default:n(l=>[d(I(t.getDictLabel("gender",l.row.gender)),1)]),_:1}),a(o,{prop:"status",label:"状态",sortable:"custom","header-align":"center",align:"center"},{default:n(l=>[l.row.status===0?(s(),i(c,{key:0,size:"small",type:"danger"},{default:n(()=>e[12]||(e[12]=[d("停用")])),_:1})):(s(),i(c,{key:1,size:"small",type:"success"},{default:n(()=>e[13]||(e[13]=[d("正常")])),_:1}))]),_:1}),a(o,{prop:"createDate",label:"创建时间",sortable:"custom","header-align":"center",align:"center",width:"180"}),a(o,{label:"操作",fixed:"right","header-align":"center",align:"center",width:"150"},{default:n(l=>[t.hasPermission("sys:user:update")?(s(),i(p,{key:0,type:"primary",link:"",onClick:h=>_(l.row.id)},{default:n(()=>e[14]||(e[14]=[d("修改")])),_:2},1032,["onClick"])):m("",!0),t.hasPermission("sys:user:delete")?(s(),i(p,{key:1,type:"primary",link:"",onClick:h=>t.deleteHandle(l.row.id)},{default:n(()=>e[15]||(e[15]=[d("删除")])),_:2},1032,["onClick"])):m("",!0)]),_:1})]),_:1},8,["data","onSelectionChange","onSortChange"])),[[V,t.dataListLoading]]),a(D,{"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,total:t.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.pageSizeChangeHandle,onCurrentChange:t.pageCurrentChangeHandle},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"]),a(P,{ref_key:"addOrUpdateRef",ref:f,onRefreshDataList:t.getDataList},null,8,["onRefreshDataList"])])}}});export{T as default};
